@model P2FixAnAppDotNetCode.Models.ViewModels.LanguageViewModel
@using Microsoft.AspNetCore.Localization
@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var currentCulture = requestCulture?.RequestCulture?.UICulture?.Name ?? "en";
    string currentLanguage = "English";
    if (currentCulture.StartsWith("fr"))
    {
        currentLanguage = "French";
    }
    else if (currentCulture.StartsWith("es"))
    {
        currentLanguage = "Spanish";
    }
    else if (currentCulture.StartsWith("wo"))
    {
        currentLanguage = "Wolof";
    }
}

<form asp-action="ChangeUiLanguage" asp-controller="Language" method="post" class="d-inline-flex align-items-center">
    @Html.AntiForgeryToken()
    <input type="hidden" name="returnUrl" value="@ViewContext.HttpContext.Request.Path" />
    <div class="form-group mb-0 mr-2">
        <select asp-for="Language" class="form-control form-control-sm navbar-select" style="min-width: 130px; display: inline-block;" onchange="this.form.submit()">
            <option value="English" @(currentLanguage == "English" ? "selected" : "")>@Localizer["LanguageEnglish"]</option>
            <option value="French" @(currentLanguage == "French" ? "selected" : "")>@Localizer["LanguageFrench"]</option>
            <option value="Spanish" @(currentLanguage == "Spanish" ? "selected" : "")>@Localizer["LanguageSpanish"]</option>
            <option value="Wolof" @(currentLanguage == "Wolof" ? "selected" : "")>@Localizer["LanguageWolof"]</option>
        </select>
    </div>
    <button type="submit" class="btn btn-sm btn-light" title="@Localizer["ChangeLanguage"]">
        <i class="fa fa-globe"></i>
    </button>
</form>
